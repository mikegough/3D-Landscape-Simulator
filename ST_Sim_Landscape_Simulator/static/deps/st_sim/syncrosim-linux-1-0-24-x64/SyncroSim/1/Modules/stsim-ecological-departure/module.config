<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <module name="stsim-ecological-departure" displayName="Ecological Departure" version="1.0024" configVersion="1.0000">
    <transformers>
      <transformer name="ecological-departure-options-transformer" displayName="ED Options Transformer">
        <dataFeeds>
          <dataFeed name="ecological-departure-option-datafeed" displayName="Ecological Departure" dataScope="Scenario"  viewClassName="SyncroSim.STSimEcologicalDeparture.OptionsDataFeedView" viewClassAssembly="SyncroSim.STSimEcologicalDeparture">
            <dataSheets>
              <dataSheet name="ED_Options" displayName="ED Options" isSingleRow="True">
                <columns>
                  <column name="OptionsID" dataType="Integer" isPrimary="True"/>
                  <column name="ScenarioID" dataType="Integer"/>
                  <column name="Timesteps"  dataType="Integer" validationType="WholeNumber" validationCondition="GreaterEqual" formula1="1" format="d"/>
                  <column name="TransitionAttributeTypeID" displayName="Transition Attribute" dataType="Integer" validationType="DataSheet" formula1="STSim_TransitionAttributeType"/>
                </columns>
              </dataSheet>
              <dataSheet name="ED_ReferenceCondition" displayName="ED Reference Conditions">
                <columns>
                  <column name="ReferenceConditionID" dataType="Integer" isPrimary="True"/>
                  <column name="ScenarioID"  dataType="Integer"/>
                  <column name="StratumID" displayName="Stratum" dataType="Integer" validationType="DataSheet" formula1="STSim_Stratum" allowDbNull="False" displayNameSource="STSim_Terminology" displayNameColumn="PrimaryStratumLabel"/>
                  <column name="StateClassID" displayName="State Class" dataType="Integer" validationType="DataSheet" formula1="STSim_StateClass" />
                  <column name="RelativeAmount" displayName="Relative Amount" dataType="Integer" validationType="WholeNumber" validationCondition="GreaterEqual" formula1="0" allowDbNull="False"/>
                  <column name="Undesirability" dataType="Double" validationType="Decimal" validationCondition="Between" formula1="0.0" formula2="2.0"/>
                  <column name="Threshold" displayName="Threshold Percent" dataType="Double" validationType="Decimal" validationCondition="Between" formula1="0.0" formula2="100.0"/>
                </columns>
                <validations>
                  <validation validationType="Unique" columns="StratumID|StateClassID"/>
                </validations>
              </dataSheet>
            </dataSheets>
          </dataFeed>
        </dataFeeds>
      </transformer>
      <transformer name="ecological-departure-pre-process-transformer" displayName="Ecological Departure Pre-Process" className="SyncroSim.STSimEcologicalDeparture.PreProcessTransformer" classAssembly="SyncroSim.STSimEcologicalDeparture">
      </transformer>
      <transformer name="ecological-departure-post-process-transformer" displayName="Ecological Departure Post-Process" className="SyncroSim.STSimEcologicalDeparture.PostProcessTransformer" classAssembly="SyncroSim.STSimEcologicalDeparture" runOrder="After">
        <dataFeeds>
          <dataFeed name="ecological-departure-output-datafeed" dataScope="Scenario" isOutput="True">
            <dataSheets>
              <dataSheet name="ED_Output" displayName="Ecological Departure">
                <columns>
                  <column name="ScenarioID" dataType="Integer" isCompositeIndex="True"/>
                  <column name="Iteration" dataType="Integer" isCompositeIndex="True" format="d"/>
                  <column name="Timestep" dataType="Integer" isCompositeIndex="True" format="d"/>
                  <column name="StratumID" dataType="Integer"/>
                  <column name="Departure" dataType="Double"/>
                  <column name="CumulativeAttribute" dataType="Double"/>
                </columns>
              </dataSheet>
            </dataSheets>
          </dataFeed>
        </dataFeeds>
      </transformer>
      <transformer name="ecological-departure-report-transformer" displayName="Ecological Departure" className="SyncroSim.STSimEcologicalDeparture.ReportTransformer" classAssembly="SyncroSim.STSimEcologicalDeparture">
      </transformer>
      <transformer name="ecological-departure-add-on-transformer" displayName="Ecological Departure" isAddOn="True" extendsModel="stsim-model-transformer" extendsTransformer="stsim-core-transformer">
        <modelRunTransformers>
          <transformer name="ecological-departure-pre-process-transformer"/>
          <transformer name="ecological-departure-post-process-transformer"/>          
        </modelRunTransformers>
        <includeTransformers>
          <transformer name="ecological-departure-options-transformer"/>
        </includeTransformers>
        <layouts>
          <layout name="ScenarioDataFeeds" appendTo="Advanced">
            <item name="ecological-departure-option-datafeed"/>
          </layout>
          <layout name="ResultTransformers" appendTo="Export|Reports">
            <item name="ecological-departure-report-transformer"/>
          </layout>          
        </layouts>
      </transformer>
    </transformers>
  </module>
</configuration>
